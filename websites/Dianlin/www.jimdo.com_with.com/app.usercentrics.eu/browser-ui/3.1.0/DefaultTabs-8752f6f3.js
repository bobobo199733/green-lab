import{aZ as e,b0 as s,a6 as i,a5 as t,aQ as a,a$ as r,aa as l,a9 as o,ab as c,b1 as n,aX as d,a2 as S,b3 as g,a4 as u,ah as y,c0 as T,aR as b,aV as v,b2 as I,ba as m}from"./index.module.js";import{M as f,e as h,f as L,h as R,v as E,k as C,i as p,q as V,p as P,r as z,s as O,t as w,w as x,x as D,F as k,y as A,z as $}from"./VirtualServiceItem-c6de05f3.js";const _=e((({controllerIdLabel:e="",hideDataProcessingServices:S=!1,isVisible:g,showServicesToggles:u=!0,stickyRef:y},T)=>{const b=f(s()),v=S?1:0,I=b.length+1+v,{getItemSize:m,setItemSize:V}=h(I,50),{clearCategoryPurposeScrollToId:P,scrollToIdTabViewCategoryPurpose:z,previousView:O}=i(),{ui:w}=t(),x=a();if(r((()=>{g&&P()}),[g]),!w||l(w))return null;const D=O!==o.FIRST_LAYER&&z;return c(p,n({"data-testid":"uc-virtual-list",ref:T,estimatedItemSize:50,marginBottom:x.spacing.base.lg,isVisible:g,itemCount:I,itemSize:m,stickyRef:y},D&&{scrollToIndex:(()=>{if(z&&"string"==typeof z){const e=b.findIndex((e=>e.category.slug===z));if(e>=0)return e+1}return-1})()},{renderItem:({index:s,style:i})=>c(L,{key:s,style:R(i)},v&&s===I-1?c(E,{titleAriaLevel:1,getItemSize:m,itemCount:I,setItemSize:V,title:e}):c(C,n({titleAriaLevel:1,"data-testid":`uc-virtual-list-item-${s}`,categories:b,getItemSize:m,hasTopSpace:!0,hideDataProcessingServices:S,index:s,id:s},D&&{scrollToId:z},{setItemSize:V,showToggles:!d(w)||!w.secondLayer.hideToggles,showServicesToggles:u}))),width:"100%"}))}));var B=S(_);var F=S(e((({controllerIdLabel:e,filterByThirdCountry:t,isVisible:l,showServicesToggles:o=!0,title:d,stickyRef:S},u)=>{const{categories:y,onServiceToggle:T,services:b}=V(s()),v=t?b.filter((e=>e.usesThirdCountry)):b,I=v.length+1+1,m=null==d?I:I+1,{getItemSize:f,setItemSize:C}=h(m,50),{clearServiceVendorScrollToId:x,scrollToIdTabViewServiceVendors:D}=i(),{onCloseSubServiceDetail:k,onOpenSubServiceDetail:A}=P(),$=a();r((()=>{l&&(k(),x())}),[l]);return c(O,null,c(z,null,c(p,n({"data-testid":"uc-virtual-list",ref:u,estimatedItemSize:50,isVisible:l,itemCount:m,itemSize:f,marginBottom:$.spacing.base.lg,stickyRef:S},D&&{scrollToIndex:(()=>{if(D&&"string"==typeof D){const e=v.findIndex((e=>e.id===D));if(e>=0)return e+1}return-1})()},{renderItem:({index:s,style:i})=>c(L,{"data-testid":`uc-virtual-list-item-${s}`,key:s,style:R(i)},(s=>s===m-1?c(E,{titleAriaLevel:1,getItemSize:f,itemCount:m,setItemSize:C,title:e}):g(v)?c(w,n({titleAriaLevel:1,categories:y,hideToggle:!o,hasTopSpace:!0,index:s,id:s,onOpenSubServiceDetail:A,onToggleService:T,getItemSize:f,setItemSize:C,services:v,title:d},D&&{scrollToId:D})):null)(s)),width:"100%"}))))})));const G=S((({scrollerRef:e})=>{const{services:i}=V(s()),{labels:a,ui:o}=t(),{selected:n,select:S}=x(),[g,f]=u(!1),h=y.CATEGORIES_PURPOSES,L=I();r((()=>{n||S(h)}),[]);const R=()=>!m(o)||!o.secondLayer.hideTogglesForServices;if(a&&o&&T(a)&&!b(a)&&!d(o)&&!l(o)){const{hideDataProcessingServices:s}=o.secondLayer;return s?c(B,{controllerIdLabel:a.general.controllerId,hideDataProcessingServices:s,ref:e,stickyRef:L,isVisible:n===y.CATEGORIES_PURPOSES,showServicesToggles:R()}):c(v,null,c(A,{ariaLabel:"SettingsTabs",ref:L},c($,{ariaControls:"uc-panel-categories",testid:"uc-tab-categories",forPanel:y.CATEGORIES_PURPOSES,id:`${a.secondLayer.categoryTab}-id`,ariaLabel:`${a.secondLayer.categoryTab}`},a.secondLayer.categoryTab),c($,{ariaControls:"uc-panel-services",testid:"uc-tab-services",forPanel:y.SERVICES_VENDORS,ariaLabel:`${a.secondLayer.serviceTab}`,id:`${a.secondLayer.serviceTab}-id`},a.secondLayer.serviceTab)),c(v,null,c(D,{id:y.CATEGORIES_PURPOSES,testid:"uc-panel-categories",ariaLabelledBy:`${a.secondLayer.categoryTab}-id`},c(B,{ref:e,stickyRef:L,isVisible:n===y.CATEGORIES_PURPOSES,showServicesToggles:R()})),c(D,{id:y.SERVICES_VENDORS,testid:"uc-panel-services",ariaLabelledBy:`${a.secondLayer.serviceTab}-id`},a.secondLayer.dataTransferFilter&&i.some((e=>e.usesThirdCountry))&&c(k,{ariaControls:"uc-panel-services",labels:a.secondLayer.dataTransferFilter,filterByThirdCountry:g,setFilterByThirdCountry:f}),c(F,{ref:e,stickyRef:L,controllerIdLabel:a.general.controllerId,filterByThirdCountry:g,isVisible:n===y.SERVICES_VENDORS,showServicesToggles:R()}))))}return null}));export{G as D};
