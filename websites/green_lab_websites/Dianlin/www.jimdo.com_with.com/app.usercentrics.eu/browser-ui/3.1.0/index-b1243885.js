import{aU as e,bg as t,bh as a,ab as o,a5 as s,aO as n,aP as r,aQ as l,b_ as i,b9 as c,a2 as u,a7 as d,b0 as g,a6 as y,b$ as b,a9 as L,a8 as f,aW as h,ba as p,ao as m,Z as S,b5 as C,aV as B,b4 as w,b6 as A,af as T,ag as O}from"./index.module.js";import{A as k,D,S as E}from"./SaveButton-0bc166c6.js";import{G as x,B as I,A as R,C as F,H as v,J as M,M as N}from"./VirtualServiceItem-c6de05f3.js";import{D as V}from"./DefaultTabs-8752f6f3.js";const P=e.div(["align-items:center;display:inline-flex;margin-top:",";margin-bottom:",";",";"],(({theme:e})=>e.spacing.base.xxs),(({theme:e})=>e.spacing.base.md),(({theme:e})=>t(e,a.MARGIN_RIGHT,e.spacing.base.md))),_=e.div(["color:",";font-size:",";display:flex;flex:1 0 auto;"],(({theme:e})=>e.ui.text.color),(({theme:e})=>e.typography.size.small)),H=({category:e,checked:t,onCategoryToggle:a})=>o(P,{"data-testid":"uc-category-toggle"},o(_,null,o(x,{checked:t,id:e.slug,isDisabled:e.isEssential,label:e.label,onToggle:a}))),U=e=>e.charAt(0).toUpperCase()+e.slice(1),Y=({disabled:e,onClick:t,buttonRef:a,marginStyle:u})=>{const{labels:d}=s(),{rules:g}=n(r.BUTTON_MORE),y=l();return i(d)||c(d)?o(I,{ariaLabel:d.ariaLabels.ccpaMoreInformation,backgroundColor:y.ui.buttons.more.bg,disabled:e,label:U(d.buttons.showSecondLayer),onClick:t,testid:"uc-more-button",textColor:y.ui.buttons.more.text,buttonRef:a,buttonTypeRules:g,marginStyle:u}):null},j={firstLayerBanner:"uc-default-banner",firstLayerWall:"uc-default-wall",secondLayer:"uc-default-settings"};var z=u((({onClose:e,onCustomize:t,onFullScreenAmp:a,onLanguageChange:n,onAcceptAll:r,onDenyAll:i,isAcceptDenyAllLoading:u,UC:x})=>{const{core:I,labels:P,ui:_}=s(),{isIE:U,isMobile:z}=d(),{categories:G,getUpdatedCategories:K,setCategories:W}=g(),{abTestVariant:J,closeView:Q,firstLayerVariant:Z,isAmpEnabled:$,isInFullScreen:q,secondLayerVariant:X,view:ee}=y(),te=b(ee===L.FIRST_LAYER?Z:X,j),ae=l(),[oe,{loading:se}]=f(x.dismissAmp,x),[ne,{loading:re}]=f(x.updateServices,x),le=h(null),ie=h(null);if(!p(_)||!c(P))return null;const ce=()=>{i().then((()=>{Q()}))},ue=re||se||u,de=o(k,{disabled:ue,onClick:()=>{r().then((()=>{Q()}))},isSecondLayerView:ee===L.SECOND_LAYER}),ge=o(D,{disabled:ue,onClick:ce,isSecondLayerView:ee===L.SECOND_LAYER}),ye=o(E,{disabled:ue,onClick:()=>{re||se||!I||ne(A(G)).then((async()=>{$&&await oe(),T(ee,O.SAVE,J,x.setTrackingPixel),W(await K(ee)),Q()}))}}),be=o(Y,{disabled:ue,onClick:t,buttonRef:le}),Le=m(m(m({AcceptAllButton:de},!_.firstLayer.hideButtonDeny&&{DenyAllButton:ge}),_.firstLayer.isCategoryTogglesEnabled&&{SaveButton:ye}),ae.ui.firstLayer.secondLayerTrigger===S.BUTTON&&{MoreButton:be});let fe={AcceptAllButton:de};fe=$?m(m({},fe),{},{DenyAllButton:ge}):_.secondLayer.hideButtonDeny?m(m({},fe),{},{SaveButton:ye}):m(m({},fe),{},{DenyAllButton:ge,SaveButton:ye});const he=te.layerPlacement===C.BOTTOM||te.layerPlacement===C.TOP,pe=ae.ui.firstLayer.secondLayerTrigger===S.LINK?[{ariaLabel:P.buttons.showSecondLayer,elRef:ie,label:P.buttons.showSecondLayer,onClick:t}]:[],me=()=>{switch(_.firstLayer.closeOption){case w.ICON:case w.LINK:return ce();default:return null}};switch(ee){case L.FIRST_LAYER:return o(R,{customActions:pe,footer:{buttons:Le,showSecondLayerButtonRef:le},header:m(m({},_.firstLayer.closeOption&&{closeOption:{onClose:me,type:_.firstLayer.closeOption||null}}),{},{description:P.firstLayer.description.default,enableHTMLTextFormatting:!0,functions:{onFullScreenAmp:a,onLanguageChange:n},labelShowLess:P.general.showLess,labelShowMore:P.general.showMore,shortDescriptionDesktop:_.firstLayer.showShortDescriptionOnDesktop?P.firstLayer.description.shortDesktop:"",shortDescriptionMobile:_.firstLayer.showShortDescriptionOnMobile?P.firstLayer.description.shortMobile:"",showCloseButton:!(!_.firstLayer.closeOption||_.firstLayer.closeOption!==w.ICON),showFullScreenButton:$&&!q,showLanguageSelector:_.firstLayer.isLanguageSelectorEnabled,title:P.firstLayer.title}),layerSettings:m(m(m({isOverlayEnabled:_.firstLayer.isOverlayEnabled},(U||z)&&{minVerticalScrollerHeight:100}),te),{},{placeLinksInFooter:he,showBorderBottom:!1,withFadingBottom:!1,withInitialHeight:!0}),useBackgroundColor:!0,setTrackingPixel:x.setTrackingPixel},_.firstLayer.isCategoryTogglesEnabled&&o(v,null,o(M,null,N({categories:G,setCategories:W}).map((e=>o(H,e))))));case L.SECOND_LAYER:return o(F,null,o(R,{footer:{buttons:fe,showBorderBeforeFooter:!0},header:{closeOption:{onClose:e,type:w.ICON},description:P.secondLayer.description,enableHTMLTextFormatting:!0,functions:{onFullScreenAmp:a,onLanguageChange:n},showCloseButton:$&&q||!$,showFullScreenButton:$&&!q,showLanguageSelector:_.secondLayer.isLanguageSelectorEnabled,title:P.secondLayer.title},layerSettings:m(m(m({isOverlayEnabled:_.secondLayer.isOverlayEnabled},U&&{minVerticalScrollerHeight:350}),te),{},{placeLinksInFooter:he,showBorderBottom:!1,side:_.secondLayer.side,withFadingBottom:!0}),useBackgroundColor:!1,setTrackingPixel:x.setTrackingPixel},o(V,null)));default:return o(B,null)}}));export{z as default};
